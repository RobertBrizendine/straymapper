{% extends "base.html" %}

{% block extra_css %}
  #map{
    display: block;
    width: 95%;
    height: 400px;
    margin: 0 auto;
    -moz-box-shadow: 0px 5px 20px #ccc;
    -webkit-box-shadow: 0px 5px 20px #ccc;
    box-shadow: 0px 5px 20px #ccc;
  }

  /* GMaps bug- https://github.com/twitter/bootstrap/issues/2410 */
  #map img {
    max-width: none;
  }
{% endblock %}

{% block extra_head %}
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script type="text/javascript" src='https://raw.github.com/HPNeo/gmaps/master/gmaps.js'></script>
  <script type="text/javascript">
    var map;
    $(document).ready(function(){
      map = new GMaps({
        div: '#map',
        zoom: 11,
        lat: 30.264998,
        lng: -97.691219
      });

      {% for animal in animal_list %}
        map.addMarker({
          lat: {{animal.geometry.y}},
          lng: {{animal.geometry.x}},
          title: '{{animal.animal_id}}',
          infoWindow: {
          content: "<p>{{animal.animal_id}}<br>Intake Date: {{animal.intake_date}}<br>Location: {{animal.location}}<br>Intake Condition: {{animal.intake_condition}}<br>Type: {{animal.animal_type}}<br>Sex: {{animal.sex}}<br>Age: {{animal.age_in_days}}<br>Color: {{animal.color}}<br>Breed: {{animal.breed}}<br>Intake Total: {{animal.intake_total}}<br><img src='http://www.petharbor.com/get_image.asp?RES=Thumb&ID={{anima.animal_id}}&LOCATION=ASTN'></p>"
          }
        });

      {% endfor %}

    });
  </script>
{% endblock %}

{% block content %}
<div class="hero-unit">
  <h1>Animal Index Page</h1>
  <p>The quick brown fox jumped over the lazy dog.</p>
</div>
<div class="row">
  <div class="span12">
    <div id="map"></div>
  </div>
</div>
{% endblock %}
